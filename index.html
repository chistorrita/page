<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Working... - Google Docs</title>
<link rel="icon" type="image/x-icon" href="https://ssl.gstatic.com/docs/documents/images/kix-favicon7.ico">
<style>
:root { --accent: #39C5BB; --dark: #121212; --card: #1E1E1E; }
body { background: var(--dark); color: white; font-family: sans-serif; margin: 0; text-align: center; overflow-x: hidden; }
header { padding: 40px; border-bottom: 2px solid var(--accent); background: #222; }
h1 { color: var(--accent); font-size: 2.5rem; letter-spacing: 5px; margin: 0; }
.container { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; padding: 40px; max-width: 1100px; margin: auto; }
.game-card { background: var(--card); border: 2px solid #333; border-radius: 20px; padding: 15px; cursor: pointer; transition: 0.3s; position: relative; }
.game-card:hover { border-color: var(--accent); transform: translateY(-10px); box-shadow: 0 10px 20px rgba(0,0,0,0.5); }
.game-card img { width: 100%; height: 140px; border-radius: 12px; object-fit: cover; background: #333; }
span { display: block; margin-top: 15px; font-weight: bold; color: #ccc; font-size: 0.9rem; }

/* Capa de Contenido */
#overlay-layer { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 9999; }

/* NUEVO BOTÓN DISCRETO */
.close-btn { 
    position: absolute; 
    top: 0; 
    right: 20px; 
    padding: 5px 15px; 
    background: #333; /* Color gris oscuro como la barra de Google */
    color: #888; 
    border: 1px solid #444; 
    border-top: none;
    border-radius: 0 0 8px 8px; 
    cursor: pointer; 
    z-index: 10000; 
    font-size: 11px;
    transition: 0.3s;
}
.close-btn:hover { background: #444; color: white; }

/* Menú YouTube */
.yt-menu { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: #1e1e1e; padding: 25px; border-radius: 20px; border: 2px solid var(--accent); z-index: 10001; width: 320px; box-shadow: 0 0 50px rgba(0,0,0,0.8); }
.yt-menu input { width: 90%; padding: 12px; margin-bottom: 15px; border-radius: 8px; border: 1px solid #444; background: #000; color: white; font-size: 1rem; }
.yt-menu button { width: 100%; padding: 12px; margin: 5px 0; border: none; border-radius: 8px; cursor: pointer; background: #333; color: white; font-weight: bold; }
.yt-menu button:hover { background: var(--accent); color: black; }
</style>
</head>
<body>

<div id="yt-selector" class="yt-menu">
    <h3 style="margin-top:0; color:var(--accent)">Video Library</h3>
    <input type="text" id="yt-search-input" placeholder="Buscar canal o video...">
    <button onclick="ytSearchCustom()" style="background:var(--accent); color:black">BUSCAR</button>
    <button onclick="closeYTMenu()" style="background:#ff4444; margin-top:10px">CANCELAR</button>
</div>

<div id="overlay-layer">
    <button class="close-btn" onclick="closeOverlay()">Close Research Mode</button>
    <iframe id="content-frame" style="width:100%; height:100%; border:none;" allowfullscreen></iframe>
</div>

<header><h1>CHISTORRITA</h1></header>

<div class="container">
  <div class="game-card" onclick="openYTMenu()">
    <img src="https://upload.wikimedia.org/wikipedia/commons/e/ef/Youtube_logo.png" style="object-fit: contain; background: white; padding: 10px; box-sizing: border-box;">
    <span>Video Library: Media Task</span>
  </div>

  <div class="game-card" onclick="launchAI()">
    <img src="https://avatars.githubusercontent.com/u/86964862?s=200&v=4" style="object-fit: cover;">
    <span>AI Assistant: Research Tool</span>
  </div>

  <div class="game-card" onclick="launchGhost('math/english.html')">
    <img src="https://images.gamebanana.com/img/ss/mods/65cb87a015247.jpg">
    <span>FNF vs FNAF 3</span>
  </div>

  <div class="game-card" onclick="launchGhost('math/cuartos.html')">
    <img src="https://images.sftcdn.net/images/t_app-cover-s-16-9,f_auto/p/f7ecad09-1b61-429f-b42d-0b5f3254be83/3110476367/the-backrooms-game-screenshot">
    <span>Backrooms Game</span>
  </div>

  <div class="game-card" onclick="launchGhost('math/doki.html')">
    <img src="https://image.api.playstation.com/vulcan/img/rnd/202107/1418/3xIQlFWEBEUNrbSOpbUxu7Pd.png">
    <span>Doki Doki Literature Club</span>
  </div>

  <div class="game-card" onclick="launchGhost('math/vampiro.html')">
    <img src="https://assets-prd.ignimgs.com/2020/09/04/castlevania-aria-of-sorrow-button-crop-1599254632265.jpg">
    <span>Castlevania Aria of Sorrow</span>
  </div>
</div>

<script>
function openYTMenu() { document.getElementById('yt-selector').style.display = 'block'; }
function closeYTMenu() { document.getElementById('yt-selector').style.display = 'none'; }

function ytSearchCustom() {
    const term = document.getElementById('yt-search-input').value;
    if(term) {
        // Usamos Bing que te funcionó perfecto
        const url = "https://www.bing.com/videos/search?q=" + encodeURIComponent(term);
        document.getElementById('content-frame').src = url;
        document.getElementById('overlay-layer').style.display = 'block';
        document.title = "Video Research - Google Docs";
        closeYTMenu();
    }
}

function launchAI() {
  const aiHTML = `
    <!DOCTYPE html><html><head><style>
    body { background: #121212; color: white; font-family: sans-serif; display: flex; flex-direction: column; height: 100vh; margin: 0; }
    #chat { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 10px; }
    .msg { padding: 12px; border-radius: 12px; max-width: 85%; font-size: 15px; }
    .user { background: #39C5BB; color: black; align-self: flex-end; font-weight: bold; }
    .ai { background: #222; border: 1px solid #333; align-self: flex-start; }
    #input-area { padding: 15px; background: #1e1e1e; display: flex; gap: 10px; border-top: 1px solid #333; }
    input { flex: 1; padding: 12px; border-radius: 8px; border: 1px solid #444; background: #000; color: white; }
    button { background: #39C5BB; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; font-weight: bold; }
    </style></head><body>
    <div id="chat"></div>
    <div id="input-area"><input type="text" id="i" placeholder="Pregunta algo..."><button onclick="ask()">ENVIAR</button></div>
    <script>
    async function ask(){
      const i=document.getElementById('i'), c=document.getElementById('chat');
      if(!i.value || i.value==='...')return;
      const u=document.createElement('div'); u.className='msg user'; u.innerText=i.value; c.appendChild(u);
      const p=i.value; i.value='...'; i.disabled=true;
      try {
        const r=await fetch('https://text.pollinations.ai/'+encodeURIComponent(p));
        const t=await r.text();
        const a=document.createElement('div'); a.className='msg ai'; a.innerText=t; c.appendChild(a);
      } catch { alert('Error'); }
      i.value=''; i.disabled=false; i.focus(); c.scrollTop=c.scrollHeight;
    }
    document.getElementById('i').addEventListener('keypress', (e)=>{if(e.key==='Enter')ask();});
    <\/script></body></html>`;
  const blob = new Blob([aiHTML], {type: 'text/html'});
  document.getElementById('content-frame').src = URL.createObjectURL(blob);
  document.getElementById('overlay-layer').style.display = 'block';
  document.title = "AI Assistant - Google Docs";
}

function launchGhost(path) {
  const url = "https://cdn.jsdelivr.net/gh/chistorrita/page@main/" + path + "?t=" + Date.now();
  fetch(url).then(r => r.text()).then(html => {
      const blob = new Blob([html], {type: 'text/html'});
      document.getElementById('content-frame').src = URL.createObjectURL(blob);
      document.getElementById('overlay-layer').style.display = 'block';
      document.title = "Reading Task - Google Docs";
  });
}

function closeOverlay() {
    document.getElementById('overlay-layer').style.display = 'none';
    document.getElementById('content-frame').src = '';
    document.title = "Working... - Google Docs";
}

document.addEventListener('keydown', e => { if (e.key === "Escape") closeOverlay(); });
</script>
</body>
</html>
